--Kenny泛滥外部汉化脚本我的哔站UID:1531514159（删了这个死妈死爹死全家）
local Translations = {
    -- Block Tales Revamp 界面文本
    ["Block Tales Revamp - TexRBLX"] = "方块故事汉化版 - TexRBLX股本9178",
    
    -- 标签页
    ["Auto Actions"] = "自动动作",
    ["Auto Superball"] = "自动超级球",
    ["Collectibles"] = "收藏品",
    ["Misc"] = "杂项",
    
    -- 自动动作功能
    ["Auto Guard (Attachment Method)"] = "自动守卫(附件方式)",
    ["Auto Guard"] = "自动守卫",
    ["Auto Guard Delay (seconds)"] = "自动守卫延迟(秒)",
    ["Auto Sword"] = "自动剑",
    ["Sword Release Delay (seconds)"] = "剑释放延迟(秒)",
    ["Use Sword on Flying Enemies"] = "对飞行敌人使用剑",
    
    ["Auto Launcher"] = "自动发射器",
    ["Enable Auto Launcher"] = "启用自动发射器",
    ["Auto Dynamic/Slingshot"] = "自动动态/弹弓",
    ["Enable Auto Dynamic/Slingshot"] = "启用自动动态/弹弓",
    
    ["Arena Enemy Targeter"] = "竞技场敌人目标选择",
    ["Target Enemy"] = "目标敌人",
    
    -- 自动超级球功能
    ["Auto Superball Action"] = "自动超级球动作",
    ["Enable Auto Superball"] = "启用自动超级球",
    ["Activation Distance (studs)"] = "激活距离(单位)",
    ["studs"] = "单位",
    
    ["Auto Linebounce (Requires Auto Superball ON)"] = "自动线弹跳(需要开启自动超级球)",
    ["Enable Auto Linebounce"] = "启用自动线弹跳",
    ["Linebounce Delay/Interval (s)"] = "线弹跳延迟/间隔(秒)",
    
    -- 收藏品功能
    ["Item Teleporter"] = "物品传送器",
    ["Select Item"] = "选择物品",
    ["- No Items Found -"] = "- 未找到物品 -",
    ["Teleport to Selected Item"] = "传送到选定物品",
    
    ["Card Teleporter"] = "卡片传送器",
    ["Select Card"] = "选择卡片",
    ["- No Cards Found -"] = "- 未找到卡片 -",
    ["Teleport to Selected Card"] = "传送到选定卡片",
    
    ["BUX Teleporter"] = "BUX传送器",
    ["Select BUX"] = "选择BUX",
    ["- No BUX Found -"] = "- 未找到BUX -",
    ["Teleport to Selected BUX"] = "传送到选定BUX",
    
    -- 杂项功能
    ["General Mods"] = "通用修改",
    ["Invincibility (Codmode)"] = "无敌模式",
    ["Speed Boost"] = "速度提升",
    ["x Multiplier"] = "倍乘数",
    
    ["Auto Fish"] = "自动钓鱼",
    ["Toggle Notifications"] = "切换通知",
    ["Toggle Debug Messages (Dev Console)"] = "切换调试消息(开发者控制台)",
    ["Enable Premium & Donator only Animation Flavors"] = "启用仅限高级和捐赠者的动画风格",
    
    -- 按钮文本
    ["button"] = "按钮",
    
    -- 聊天提示
    ["To chat click here or press the \"/\" key"] = "点击此处或按\"/\"键聊天",
    
    -- 其他文本
    ["Captain Trotter"] = "特洛特船长",
    ["s"] = "秒"
}

local function translateText(text)
    if not text or type(text) ~= "string" then return text end
    
    if Translations[text] then
        return Translations[text]
    end
    
    for en, cn in pairs(Translations) do
        if text:find(en) then
            return text:gsub(en, cn)
        end
    end
    
    return text
end

local function setupTranslationEngine()
    local success, err = pcall(function()
        local oldIndex = getrawmetatable(game).__newindex
        setreadonly(getrawmetatable(game), false)
        
        getrawmetatable(game).__newindex = newcclosure(function(t, k, v)
            if (t:IsA("TextLabel") or t:IsA("TextButton") or t:IsA("TextBox")) and k == "Text" then
                v = translateText(tostring(v))
            end
            return oldIndex(t, k, v)
        end)
        
        setreadonly(getrawmetatable(game), true)
    end)
    
    if not success then
        warn("元表劫持失败:", err)
       
        local translated = {}
        local function scanAndTranslate()
            for _, gui in ipairs(game:GetService("CoreGui"):GetDescendants()) do
                if (gui:IsA("TextLabel") or gui:IsA("TextButton") or gui:IsA("TextBox")) and not translated[gui] then
                    pcall(function()
                        local text = gui.Text
                        if text and text ~= "" then
                            local translatedText = translateText(text)
                            if translatedText ~= text then
                                gui.Text = translatedText
                                translated[gui] = true
                            end
                        end
                    end)
                end
            end
            
            local player = game:GetService("Players").LocalPlayer
            if player and player:FindFirstChild("PlayerGui") then
                for _, gui in ipairs(player.PlayerGui:GetDescendants()) do
                    if (gui:IsA("TextLabel") or gui:IsA("TextButton") or gui:IsA("TextBox")) and not translated[gui] then
                        pcall(function()
                            local text = gui.Text
                            if text and text ~= "" then
                                local translatedText = translateText(text)
                                if translatedText ~= text then
                                    gui.Text = translatedText
                                    translated[gui] = true
                                end
                            end
                        end)
                    end
                end
            end
        end
        
        local function setupDescendantListener(parent)
            parent.DescendantAdded:Connect(function(descendant)
                if descendant:IsA("TextLabel") or descendant:IsA("TextButton") or descendant:IsA("TextBox") then
                    task.wait(0.1)
                    pcall(function()
                        local text = descendant.Text
                        if text and text ~= "" then
                            local translatedText = translateText(text)
                            if translatedText ~= text then
                                descendant.Text = translatedText
                            end
                        end
                    end)
                end
            end)
        end
        
        pcall(setupDescendantListener, game:GetService("CoreGui"))
        local player = game:GetService("Players").LocalPlayer
        if player and player:FindFirstChild("PlayerGui") then
            pcall(setupDescendantListener, player.PlayerGui)
        end
        
        while true do
            scanAndTranslate()
            task.wait(3)
        end
    end
end

task.wait(2)

setupTranslationEngine()

local success, err = pcall(function()
--这下面填加载外部脚本
loadstring(game:HttpGet("https://raw.githubusercontent.com/TexRBLX/Roblox-stuff/refs/heads/main/block%20tales/revamp.lua"))()



end)

if not success then
    warn("加载失败:", err)
end
